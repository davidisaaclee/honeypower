// Generated by CoffeeScript 1.9.2
(function() {
  var Model, Transform, Vector2, _, wrap,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  _ = require('lodash');

  Model = require('../Model');

  Vector2 = require('./Vector2');

  wrap = require('../../util/wrap');


  /*
  Describes a two-dimensional transform.
  
  Transform ::=
    position: Vector2
    rotation: Number
    scale: Vector2
   */

  Transform = (function(superClass) {
    extend(Transform, superClass);

    function Transform() {
      return Transform.__super__.constructor.apply(this, arguments);
    }

    Transform.make = function(position, rotation, scale) {
      if (position == null) {
        position = Vector2.zero;
      }
      if (rotation == null) {
        rotation = 0;
      }
      if (scale == null) {
        scale = Vector2.make(1, 1);
      }
      return _.assign(new Transform(), {
        position: position,
        rotation: rotation,
        scale: scale
      });
    };

    Transform["default"] = Object.freeze(Transform.make());

    Transform.withPosition = function(position) {
      return Transform.make(position);
    };

    Transform.withRotation = function(rotation) {
      return Transform.make(null, rotation, null);
    };

    Transform.withScale = function(scale) {
      return Transform.make(null, null, scale);
    };

    Transform.getPosition = function(transform) {
      return transform.position;
    };

    Transform.getRotation = function(transform) {
      return transform.rotation;
    };

    Transform.getScale = function(transform) {
      return transform.scale;
    };

    Transform.applyTransform = function(transformA, transformB) {
      return Transform.make(Vector2.add(transformA.position, transformB.position), transformA.rotation + transformB.rotation, Vector2.piecewiseMultiply(transformA.scale, transformB.scale));
    };

    Transform.translate = function(transform, amount) {
      return _.assign({}, transform, {
        position: Vector2.add(transform.position, amount)
      });
    };

    Transform.rotate = function(transform, amount) {
      return _.assign({}, transform, {
        rotate: wrap(0, 2 * Math.PI, transform.rotate + amount)
      });
    };

    Transform.scale = function(transform, amount) {
      return _.assign({}, transform, {
        scale: Vector2.add(transform.scale, amount)
      });
    };

    return Transform;

  })(Model);

  module.exports = Transform;

}).call(this);

//# sourceMappingURL=Transform.js.map
