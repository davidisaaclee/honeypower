// Generated by CoffeeScript 1.9.2
(function() {
  var Entity, Scene, Set, Timeline, _, addChildReducers, clamp, combineReducers, defaultScene, k, mapAssign, reducer, updeep, wrap;

  _ = require('lodash');

  updeep = require('updeep');

  combineReducers = require('redux').combineReducers;

  k = require('../ActionTypes');

  Scene = require('../model/Scene');

  Entity = require('../model/entities/Entity');

  Timeline = require('../model/timelines/Timeline');

  Set = require('../util/Set');

  mapAssign = require('../util/mapAssign');

  addChildReducers = require('../util/addChildReducers');

  clamp = require('../util/clamp');

  wrap = require('../util/wrap');

  defaultScene = Scene.empty;

  reducer = function(scene, action) {
    var delta, progress;
    if (scene == null) {
      scene = defaultScene;
    }
    switch (action.type) {
      case k.DeltaTime:
        delta = action.data.delta;
        progress = function(s, id) {
          return Scene.progressTimeline(s, id, delta);
        };
        return Scene.allTimelines.get(scene).filter(function(tl) {
          return (Timeline.updateMethod.get(tl)) === Timeline.UpdateMethod.Time;
        }).map(function(tl) {
          return Timeline.id.get(tl);
        }).reduce(progress, scene);
      default:
        return scene;
    }
  };

  module.exports = reducer;

}).call(this);

//# sourceMappingURL=SceneReducer.js.map
